
<div class="container">
<h2>Gestione Permessi</h2>

<section class="intro" id="main-container" >
  <h3>Permessi in attesa di approvazione :</h3>
  <div class="bg-image h-100" style="background-color: #f5f7fa;">
    <div class="mask d-flex align-items-center h-100">
      <div class="container">
        <div class="row justify-content-center">
          <!-- <div class="col"> -->
            <div class="card">
              <div class="card-body p-0">
                <div class="table-responsive table-scroll" data-mdb-perfect-scrollbar="true" style="position: relative;">
                  
                  <table class="table table-striped mb-0">
                    <thead style="background-color: #002d72; position: sticky;top: 0;">
                      <tr>
                        <th scope="col">Tipo permesso</th>
                        <th scope="col">Richiedente</th>
                        <th scope="col">Dal giorno</th>
                        <th scope="col">Al giorno</th>
                        <th scope="col">Giorni totali</th>
                        <th scope="col">Dalle ore</th>
                        <th scope="col">Alle ore</th>
                        <th scope="col">Ore totali</th>
                        <th scope="col"></th>
                        <th scope="col"></th>
                        
            
                      </tr>
                    </thead>
                    <div *ngIf="permessiPending?.length == 0" >
                      
                      <h5 class="alert-heading">Nessun permesso da approvare</h5>
                  </div> 
                    <tbody>
                      <tr *ngFor= "let permesso of permessiPending">
                        <th scope="row">{{permesso?.tipoPermesso}}</th>
                        <td>{{permesso?.utenteRichiedente.cognome + " " + permesso?.utenteRichiedente.nome}}</td>
                        <td>{{permesso?.dataInizio}}</td>
                        <td>{{permesso?.dataFine}}</td>
                        <td>{{permesso?.totGiorni}}</td>
                        <td>{{permesso?.dalleOre}}</td>
                        <td>{{permesso?.alleOre}}</td>
                        <td>{{permesso?.totOre}}</td>
                        
                        <td>
                          
                          <button type="button" (click)='conferma("approva", permesso, confermaForm.value)' class="btn btn-primary">Approva</button> </td>
                        <!-- <td><button type="button" (click)="conferma('rifiuta', permesso)" class="btn btn-secondary" >Respingi </button> </td> -->
                        

                        <td><button (click)="onRespingiPermesso(permesso)" class="btn btn-secondary tooltips" data-placement="top" data-toggle="tooltip" data-original-title="Delete"><i class="fa fa-times"> Respingi</i></button></td>
                        <div class="modal fade" id="respingiPermesso" tabindex="-1" role="dialog" aria-labelledby="respingiPermessoModalLabel" aria-hidden="true">
                          <div class="modal-dialog" role="document">
                           <div class="modal-content">
                              <div class="modal-header">
                                 <h5 class="modal-title" id="respingiPermessoModalLabel">Stai respingendo una richiesta di permesso</h5>
                                 <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                 <span aria-hidden="true">&times;</span>
                                 </button>
                              </div>
                              <div class="modal-body">

                                <form #confermaForm="ngForm"  id="confermaForm" (ngSubmit)="conferma('rifiuta', permesso, confermaForm)" ngNativeValidate>
                                  
                                  <div *ngFor="let item of permesso | keyvalue">
                                    <input type="hidden" [ngModel]="item?.value" [name]="item?.key" class="form-control" id="{{item.key}}">
                                  </div>
                                  
                                 
                                  <div class="form-group">
                                    <label for="note">Note</label>
                                    <textarea ngModel name="note" class="form-control" id="note" placeholder="note" title="Inserisci il motivo per cui stai respingendo il permesso" required>bu</textarea>
                                 </div>
                                
                                 <div class="modal-footer">
                                    <button type="button" id="annulla" class="btn btn-secondary" data-dismiss="modal">Annulla</button>
                                    <button type="submit"  class="btn btn-primary"  >Respingi</button>
                                  </div>
                                </form>

                              </div>
                           </div>
                         </div>
                         </div>
                        
                        

                      </tr>
                    </tbody>
                  </table>


                </div>
              </div>
            </div>
          <!-- </div> -->
        </div>
      </div>
    </div>
  </div>
</section>

<section class="intro">
  <h3>Permessi approvati:</h3>
  <div class="bg-image h-100" style="background-color: #f5f7fa;">
    <div class="mask d-flex align-items-center h-100">
      <div class="container">
        <div class="row justify-content-center">
          <!-- <div class="col"> -->
            <div class="card">
              <div class="card-body p-0">
                <div class=" table-scroll" data-mdb-perfect-scrollbar="true" style="position: relative;">
                  
                  <table class="table table-striped mb-0">
                    <thead style="background-color: #002d72; position: sticky;top: 0;">
                      <tr>
                        <th scope="col">Tipo permesso</th>
                        <th scope="col">Richiedente</th>
                        <th scope="col">Dal giorno</th>
                        <th scope="col">Al giorno</th>
                        <th scope="col">Giorni totali</th>
                        <th scope="col">Dalle ore</th>
                        <th scope="col">Alle ore</th>
                        <th scope="col">Ore totali</th>
                        <th scope="col">Approvato in data:</th>
                        
            
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor= "let permesso of permessiApprovati">
                        <th scope="row">{{permesso?.tipoPermesso}}</th>
                        <td>{{permesso?.utenteRichiedente.cognome + " " + permesso?.utenteRichiedente.nome}}</td>
                        <td>{{permesso?.dataInizio}}</td>
                        <td>{{permesso?.dataFine}}</td>
                        <td>{{permesso?.totGiorni}}</td>
                        <td>{{permesso?.dalleOre}}</td>
                        <td>{{permesso?.alleOre}}</td>
                        <td>{{permesso?.totOre}}</td>
                        <td>{{permesso?.dataApprovazione}}</td>
                        
                      </tr>
                    </tbody>
                  </table>


                </div>
              </div>
            </div>
          <!-- </div> -->
        </div>
      </div>
    </div>
  </div>
</section>

<section class="intro">
  <h3>Permessi respinti:</h3>
  <div class="bg-image h-100" style="background-color: #f5f7fa;">
    <div class="mask d-flex align-items-center h-100">
      <div class="container">
        <div class="row justify-content-center">
          <!-- <div class="col"> -->
            <div class="card">
              <div class="card-body p-0">
                <div class="table-responsive table-scroll" data-mdb-perfect-scrollbar="true" style="position: relative;">
                  
                  <table class="table table-striped mb-0">
                    <thead style="background-color: #002d72;position: sticky;top: 0;">
                      <tr>
                        <th scope="col">Tipo permesso</th>
                        <th scope="col">Richiedente</th>
                        <th scope="col">Dal giorno</th>
                        <th scope="col">Al giorno</th>
                        <th scope="col">Giorni totali</th>
                        <th scope="col">Dalle ore</th>
                        <th scope="col">Alle ore</th>
                        <th scope="col">Ore totali</th>
                        <th scope="col">Respinto in data:</th>
                        
            
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor= "let permesso of permessiRespinti">
                        <th scope="row">{{permesso?.tipoPermesso}}</th>
                        <td>{{permesso?.utenteRichiedente.cognome + " " + permesso?.utenteRichiedente.nome}}</td>
                        <td>{{permesso?.dataInizio}}</td>
                        <td>{{permesso?.dataFine}}</td>
                        <td>{{permesso?.totGiorni}}</td>
                        <td>{{permesso?.dalleOre}}</td>
                        <td>{{permesso?.alleOre}}</td>
                        <td>{{permesso?.totOre}}</td>
                        <td>{{permesso?.dataApprovazione}}</td>
                        
                      </tr>
                    </tbody>
                  </table>


                </div>
              </div>
            </div>
          <!-- </div> -->
        </div>
      </div>
    </div>
  </div>
</section>










</div>