

<div class="container">
  <h2>Ricerca permessi per:</h2>
  <div class="col">
      
<form #searchForm="ngForm" (ngSubmit)="search(searchForm)" id="searchForm" ngNativeValidate> <!-- (ngSubmit)="search(searchForm)" -->
  <div class="row" >
    <div class="col">
      <div class="form-group">
          <label for="tipoPermesso">Tipo di permesso:</label>
          <select ngModel name="tipoPermesso" class="form-control" id="tipoPermesso" placeholder="Seleziona tipo permesso"  form="searchForm" >
              <option value="congedo ordinario">Congedo Ordinario</option>
              <option value="permesso breve">Permesso breve</option>
              <option value="recupero ore eccedenti">Recupero ore eccedenti</option>
              <option value="Altri permessi">Altri permessi</option>
              <option value="">Tutti i permessi</option>
          </select>
      </div>
    </div>
    <div class="col">
      <div class="form-group">
        <label for="key">Utente richiedente:</label>
           <input type="text" (ngModelChange)="cercaUtenteRichidente(key.value)" #key="ngModel" ngModel 
           name="key" id="searchName"  class="form-control mr-sm-2" placeholder="Cerca utente..">
         
           <ul class="list-group" id="utentiTrovati">
            <li class="list-group-item" *ngFor= "let utente of utentiRichiedentiTrovati" value="{{utente?.id}}"><a (click)="selezionaUtenteRichiedente(utente)">{{utente?.cognome+ " " + utente?.nome}}</a></li>
          </ul>
        </div>
    </div>
    <div class="col">
      <div class="form-group">
          <label for="utenteRichiedente">Utente richiedente selezionato:</label>
          <input  name="idUtente" id="utenteRichiedente" class="form-control" disabled>
          <input type="hidden" ngModel="{{utenteRichiedente?.id}}" name="idUtente" class="form-control" id="idUtenteRichiedente" > 

        </div>
    </div>

    
  <div class="col"> 
    <div class="form-group">
        <label for="dataApprovazione">Data approvazione permesso:</label>
        <input type="date" ngModel name="dataApprovazione" class="form-control" id="dataApprovazione" title="Data Approvazione ferie">
    </div>
  </div>

  <div class="col">
    <div class="form-group">
      <label for="key">Utente che ha approvato il permesso:</label>
         <input type="text" (ngModelChange)="cercaUtenteApprovatore(key.value)" #key="ngModel" ngModel 
         name="key" id="searchName"  class="form-control mr-sm-2" placeholder="Cerca utente..">
       
         <ul class="list-group" id="utentiTrovati">
          <li class="list-group-item" *ngFor= "let utente of utentiApprovatoriTrovati" value="{{utente?.id}}"><a (click)="selezionaUtenteApprovatore(utente)">{{utente?.cognome+ " " + utente?.nome}}</a></li>
        </ul>
      </div>
  </div>
  <div class="col">
    <div class="form-group">
        <label for="utenteApprovazione">Utente approvatore selezionato:</label>
        <input type="text" id="utenteApprovatoreSelezionato" class="form-control" disabled>
        <input type="hidden" ngModel="{{utenteApprovatore?.id}}" name="idUtenteApprovazione" class="form-control" id="idUtenteApprovazione" > 
    
      </div>
  </div>

  </div>


  <div class="row">
    <div class="col">
      <div class="form-group">
        <button type="submit"  class="btn btn-primary"  >Cerca</button>

      </div>
    </div>
  </div>
    
  
      </form>
  </div>
  

</div>

<div class="container">

    <div class="col" >
        <table class="table table-striped" id="congedo">
            <thead>
              <tr>
                <th scope="col">Tipo permesso</th>
                <th scope="col">Richiedente</th>
                <th scope="col">Dal giorno</th>
                <th scope="col">Al giorno</th>
                <th scope="col">Giorni totali</th>
                <th scope="col">Dalle ore</th>
                <th scope="col">Alle ore</th>
                <th scope="col">Ore totali</th>
                <th scope="col">Approvato da</th>
                <th scope="col">Approvato in data:</th>

              </tr>
            </thead>
            <tbody>
              <tr *ngFor= "let permesso of permessi">
                <th scope="row">{{permesso?.tipoPermesso}}</th>
                <td>{{permesso?.idUtente}}</td>
                <td>{{permesso?.dataInizio}}</td>
                <td>{{permesso?.dataFine}}</td>
                <td>{{permesso?.totGiorni}}</td>
                <td>{{permesso?.dalleOre}}</td>
                <td>{{permesso?.alleOre}}</td>
                <td>{{permesso?.totOre}}</td>
                <td>{{permesso?.utenteApprovazione.cognome + " " + permesso?.utenteApprovazione.nome}}</td>
                <td>{{permesso?.dataApprovazione}}</td>
              </tr>
            </tbody>
          </table>
    </div>
</div>



